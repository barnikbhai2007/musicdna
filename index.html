<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Verse Battle</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Syncopate:wght@400;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@200;300;400;500;600;700;800&display=swap');
        
        body {
            font-family: 'Quicksand', sans-serif;
            background: #0a001a;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23e879f9' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M9 18V5l12-2v13'%3E%3C/path%3E%3Ccircle cx='6' cy='18' r='3'%3E%3C/circle%3E%3Ccircle cx='18' cy='16' r='3'%3E%3C/circle%3E%3C/svg%3E"), auto;
        }
        
        .title-font {
            font-family: 'Syncopate', sans-serif;
        }
        
        .subtitle-font {
            font-family: 'Montserrat', sans-serif;
        }
        
        .music-card {
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            background: linear-gradient(135deg, rgba(30, 10, 60, 0.8), rgba(10, 0, 30, 0.9));
            backdrop-filter: blur(10px);
            border: 1px solid rgba(233, 213, 255, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .music-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100%;
            background: linear-gradient(to bottom, 
                rgba(233, 213, 255, 0.1) 0%, 
                rgba(233, 213, 255, 0) 5%,
                rgba(233, 213, 255, 0) 95%,
                rgba(233, 213, 255, 0.1) 100%);
            pointer-events: none;
        }
        
        .music-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 10px 30px rgba(233, 213, 255, 0.3);
            border-color: rgba(233, 213, 255, 0.5);
        }
        
        .btn {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 20px rgba(233, 213, 255, 0.6);
        }
        
        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%, -50%);
            transform-origin: 50% 50%;
        }
        
        .btn:focus:not(:active)::after {
            animation: ripple 1s ease-out;
        }
        
        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(20, 20);
                opacity: 0;
            }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        .slide-in {
            animation: slideIn 0.5s ease-out;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(233, 213, 255, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(233, 213, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(233, 213, 255, 0); }
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            animation: fall 3s ease-in infinite;
            pointer-events: none;
            z-index: 100;
        }
        
        @keyframes fall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }

        .progress-bar {
            height: 6px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #c084fc, #e879f9);
            transition: width 0.5s ease;
        }
        
        .music-image {
            position: relative;
            overflow: hidden;
        }
        
        .music-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,0.7) 100%);
            z-index: 1;
        }
        
        .glow-border {
            box-shadow: 0 0 20px rgba(233, 213, 255, 0.6);
            animation: glow 2s infinite alternate;
        }
        
        @keyframes glow {
            from { box-shadow: 0 0 20px rgba(233, 213, 255, 0.6); }
            to { box-shadow: 0 0 30px rgba(216, 180, 254, 0.8); }
        }
        
        /* Heavenly concert background */
        .concert-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%);
        }
        
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
            pointer-events: none;
        }
        
        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            animation: twinkle 5s infinite;
            pointer-events: none;
        }
        
        @keyframes twinkle {
            0% { opacity: 0.2; }
            50% { opacity: 1; }
            100% { opacity: 0.2; }
        }
        
        .sound-waves {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
            pointer-events: none;
            opacity: 0.1;
        }
        
        .wave {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 200px;
            background: rgba(233, 213, 255, 0.1);
            border-radius: 50%;
            transform-origin: 50% 100%;
            animation: wave 15s infinite linear;
        }
        
        .wave:nth-child(2) {
            animation-delay: 3s;
            opacity: 0.3;
        }
        
        .wave:nth-child(3) {
            animation-delay: 6s;
            opacity: 0.2;
        }
        
        .wave:nth-child(4) {
            animation-delay: 9s;
            opacity: 0.1;
        }
        
        @keyframes wave {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            100% {
                transform: scale(3);
                opacity: 0;
            }
        }
        
        /* Click effect */
        .click-ripple {
            position: absolute;
            border-radius: 50%;
            background-color: rgba(233, 213, 255, 0.4);
            transform: scale(0);
            animation: clickRipple 0.6s linear;
            pointer-events: none;
            z-index: 9999;
        }
        
        @keyframes clickRipple {
            0% {
                transform: scale(0);
                opacity: 0.8;
            }
            100% {
                transform: scale(10);
                opacity: 0;
            }
        }
        
        /* Footer */
        .footer {
            background: linear-gradient(90deg, rgba(10, 0, 26, 0.8), rgba(20, 0, 50, 0.8));
            backdrop-filter: blur(5px);
            border-top: 1px solid rgba(233, 213, 255, 0.2);
        }
        
        .heart {
            display: inline-block;
            animation: heartbeat 1.5s infinite;
            color: #ff3366;
        }
        
        @keyframes heartbeat {
            0% { transform: scale(1); }
            25% { transform: scale(1.1); }
            50% { transform: scale(1); }
            75% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .india-flag {
            display: inline-block;
            margin-left: 5px;
        }
        
        /* Holographic effect */
        .holographic {
            position: relative;
            overflow: hidden;
        }
        
        .holographic::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, 
                rgba(255,255,255,0) 0%, 
                rgba(255,255,255,0.05) 25%, 
                rgba(255,255,255,0.1) 50%, 
                rgba(255,255,255,0.05) 75%, 
                rgba(255,255,255,0) 100%);
            animation: holographicShine 3s linear infinite;
            pointer-events: none;
            z-index: 2;
        }
        
        @keyframes holographicShine {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Click effect particles */
        .click-particle {
            position: absolute;
            background: radial-gradient(circle, #e879f9 0%, transparent 70%);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            opacity: 0;
            transform: translate(-50%, -50%);
        }
        
        @keyframes particleAnimation {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0.8;
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 0;
            }
        }
        
        /* Music card placeholder images */
        .music-placeholder {
            background: linear-gradient(135deg, #1e0a3c 25%, #0a001a 25%, #0a001a 50%, #1e0a3c 50%, #1e0a3c 75%, #0a001a 75%, #0a001a 100%);
            background-size: 20px 20px;
            position: relative;
            overflow: hidden;
        }
        
        .music-placeholder::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 50%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(233, 213, 255, 0.2), transparent);
            animation: shine 2s infinite;
        }
        
        @keyframes shine {
            0% { left: -100%; }
            100% { left: 150%; }
        }
        
        /* Neon glow */
        .neon-text {
            text-shadow: 0 0 5px rgba(233, 213, 255, 0.8), 
                         0 0 10px rgba(233, 213, 255, 0.5), 
                         0 0 15px rgba(233, 213, 255, 0.3);
        }
        
        /* Enhanced visual click effect */
        .visual-click {
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(233, 213, 255, 0.8) 0%, rgba(233, 213, 255, 0) 70%);
            transform: translate(-50%, -50%) scale(0);
            animation: visualClick 0.5s ease-out forwards;
            pointer-events: none;
            z-index: 9999;
        }
        
        @keyframes visualClick {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(2); opacity: 0; }
        }
        
        /* Equalizer animation */
        .equalizer {
            position: fixed;
            bottom: 60px;
            right: 20px;
            display: flex;
            align-items: flex-end;
            height: 30px;
            gap: 3px;
            z-index: 100;
            pointer-events: none;
        }
        
        .equalizer-bar {
            width: 4px;
            background: linear-gradient(to top, #c084fc, #e879f9);
            border-radius: 2px;
        }
        
        @keyframes equalize1 { 0%, 100% { height: 10px; } 50% { height: 25px; } }
        @keyframes equalize2 { 0%, 100% { height: 20px; } 50% { height: 5px; } }
        @keyframes equalize3 { 0%, 100% { height: 15px; } 50% { height: 30px; } }
        @keyframes equalize4 { 0%, 100% { height: 5px; } 50% { height: 20px; } }
        @keyframes equalize5 { 0%, 100% { height: 25px; } 50% { height: 10px; } }
        
        .eq1 { animation: equalize1 0.8s ease-in-out infinite; }
        .eq2 { animation: equalize2 1.0s ease-in-out infinite; }
        .eq3 { animation: equalize3 0.7s ease-in-out infinite; }
        .eq4 { animation: equalize4 0.9s ease-in-out infinite; }
        .eq5 { animation: equalize5 1.1s ease-in-out infinite; }
        
        /* VS badge */
        .vs-badge {
            background: linear-gradient(135deg, #c084fc, #e879f9);
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            box-shadow: 0 0 20px rgba(233, 213, 255, 0.6);
            position: relative;
            z-index: 10;
        }
        
        .vs-badge::before {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            background: transparent;
            border: 2px solid rgba(233, 213, 255, 0.3);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        /* Music card title */
        .music-title-bg {
            background: linear-gradient(90deg, rgba(233, 213, 255, 0.1), rgba(216, 180, 254, 0.1));
            border-left: 3px solid #e879f9;
        }
        
        /* Stats bars */
        .stat-bar {
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .stat-fill-1 {
            height: 100%;
            background: linear-gradient(90deg, #c084fc, #e879f9);
        }
        
        .stat-fill-2 {
            height: 100%;
            background: linear-gradient(90deg, #60a5fa, #3b82f6);
        }
        
        .stat-fill-3 {
            height: 100%;
            background: linear-gradient(90deg, #f472b6, #ec4899);
        }
        
        /* Music note animation */
        .floating-notes {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .music-note {
            position: absolute;
            font-size: 24px;
            color: rgba(233, 213, 255, 0.3);
            animation: floatNote 15s linear infinite;
            pointer-events: none;
        }
        
        @keyframes floatNote {
            0% {
                transform: translateY(100vh) translateX(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) translateX(100px) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* CD Vinyl animation */
        .vinyl {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: radial-gradient(circle at center, 
                #000 0%, 
                #000 30%, 
                #333 30%, 
                #333 35%, 
                #000 35%, 
                #000 40%, 
                #333 40%, 
                #333 45%, 
                #000 45%, 
                #000 48%, 
                rgba(0,0,0,0.5) 48%, 
                rgba(0,0,0,0.5) 100%);
            animation: spin 4s linear infinite;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
            position: relative;
        }
        
        .vinyl::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 15%;
            height: 15%;
            background: #e879f9;
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(233, 213, 255, 0.8);
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Play indicator */
        .play-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .music-card:hover .play-indicator,
        .music-card.playing .play-indicator {
            opacity: 1;
        }
        
        .play-indicator svg {
            width: 20px;
            height: 20px;
            fill: #fff;
        }
        
        /* Music genre tags */
        .genre-tag {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            margin-right: 5px;
            margin-bottom: 5px;
            background: rgba(233, 213, 255, 0.2);
            border: 1px solid rgba(233, 213, 255, 0.3);
        }
        
        /* Artist name */
        .artist-name {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            margin-top: 2px;
        }
        
        /* Music DNA visualization */
        .dna-strand {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1px;
            margin: 20px 0;
        }
        
        .dna-node {
            width: 4px;
            height: 20px;
            background: linear-gradient(to bottom, #c084fc, #e879f9);
            border-radius: 2px;
            position: relative;
        }
        
        .dna-node::before,
        .dna-node::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 2px;
            background: rgba(233, 213, 255, 0.5);
            left: 50%;
            transform: translateX(-50%);
        }
        
        .dna-node::before {
            top: 4px;
        }
        
        .dna-node::after {
            bottom: 4px;
        }
        
        .dna-node:nth-child(even) {
            height: 30px;
        }
        
        .dna-node:nth-child(even)::before {
            top: 6px;
        }
        
        .dna-node:nth-child(even)::after {
            bottom: 6px;
        }
        
        /* Music mood badges */
        .mood-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            margin: 5px;
            background: rgba(233, 213, 255, 0.1);
            border: 1px solid rgba(233, 213, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .mood-badge:hover {
            background: rgba(233, 213, 255, 0.2);
            transform: translateY(-2px);
        }
        
        .mood-badge.active {
            background: linear-gradient(135deg, #c084fc, #e879f9);
            box-shadow: 0 0 10px rgba(233, 213, 255, 0.5);
        }
        
        /* Music player animation */
        .music-playing-animation {
            display: flex;
            align-items: flex-end;
            height: 20px;
            gap: 2px;
        }
        
        .music-bar {
            width: 3px;
            background: #e879f9;
            border-radius: 1px;
        }
        
        .music-bar-1 { animation: musicBar 0.8s ease-in-out infinite; }
        .music-bar-2 { animation: musicBar 1.0s ease-in-out infinite; }
        .music-bar-3 { animation: musicBar 0.6s ease-in-out infinite; }
        .music-bar-4 { animation: musicBar 0.9s ease-in-out infinite; }
        
        @keyframes musicBar {
            0%, 100% { height: 5px; }
            50% { height: 20px; }
        }
    </style>
</head>
<body class="text-white">
    <!-- Hidden audio element for click sound -->
    <audio id="clickSound" src="click.mp3" preload="auto"></audio>

    <!-- Heavenly Concert Background Elements -->
    <div class="concert-bg"></div>
    <div class="stars" id="stars"></div>
    <div class="sound-waves">
        <div class="wave"></div>
        <div class="wave"></div>
        <div class="wave"></div>
        <div class="wave"></div>
    </div>
    <div class="floating-notes" id="floating-notes"></div>
    
    <!-- Equalizer animation -->
    <div class="equalizer">
        <div class="equalizer-bar eq1"></div>
        <div class="equalizer-bar eq2"></div>
        <div class="equalizer-bar eq3"></div>
        <div class="equalizer-bar eq4"></div>
        <div class="equalizer-bar eq5"></div>
    </div>
    
    <div id="app" class="container mx-auto px-4 py-8 max-w-6xl relative">
        <!-- Home Screen -->
        <div id="home-screen" class="flex flex-col items-center justify-center min-h-[80vh] fade-in">
            <h1 class="text-4xl md:text-6xl font-bold text-center mb-6 neon-text title-font tracking-wider">MUSIC VERSE BATTLE</h1>
            <p class="text-lg md:text-xl text-center mb-12 max-w-2xl text-gray-300 subtitle-font">Discover your ultimate favorite song through exciting head-to-head battles in a heavenly concert experience. Your chosen track moves forward to face the next challenger!</p>
            <button id="start-button" class="btn bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-4 px-10 rounded-lg text-xl shadow-lg subtitle-font holographic">
                START THE CONCERT
            </button>
        </div>

        <!-- Music Battle Screen -->
        <div id="battle-screen" class="hidden fade-in">
            <div class="text-center mb-10">
                <h2 class="text-2xl md:text-3xl font-bold mb-3 title-font neon-text">Battle <span id="current-battle">1</span> of <span id="total-battles">159</span></h2>
                <p class="text-gray-300 mb-5 subtitle-font">Choose your favorite track</p>
                <div class="progress-bar w-full max-w-xl mx-auto mb-3">
                    <div id="progress-fill" class="progress-fill" style="width: 0%"></div>
                </div>
                <p class="text-sm text-gray-400 subtitle-font">Songs remaining: <span id="songs-remaining">159</span></p>
            </div>
            
            <div class="flex flex-col md:flex-row justify-center items-center gap-8 md:gap-16 my-8">
                <div id="champion-card" class="music-card rounded-xl overflow-hidden shadow-lg w-full md:w-96 slide-in">
                    <div class="h-56 bg-gray-900 flex items-center justify-center overflow-hidden relative">
                        <div class="music-image music-placeholder w-full h-full bg-center bg-cover flex items-center justify-center">
                            <div class="vinyl-container w-32 h-32 relative">
                                <div class="vinyl"></div>
                            </div>
                        </div>
                        <div class="play-indicator">
                            <div class="music-playing-animation">
                                <div class="music-bar music-bar-1" style="height: 10px;"></div>
                                <div class="music-bar music-bar-2" style="height: 15px;"></div>
                                <div class="music-bar music-bar-3" style="height: 8px;"></div>
                                <div class="music-bar music-bar-4" style="height: 12px;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="p-5">
                        <div class="music-title-bg p-3 mb-4">
                            <h3 class="song-title text-xl font-bold title-font">Current Champion</h3>
                            <p class="artist-name subtitle-font">Artist Name</p>
                            <div class="flex flex-wrap mt-2">
                                <span class="genre-tag">Genre</span>
                            </div>
                        </div>
                        <button class="choose-btn btn w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 py-3 px-4 rounded-lg font-medium subtitle-font" data-index="0">
                            Choose This Song
                        </button>
                    </div>
                </div>
                
                <div class="vs-badge title-font text-2xl font-bold">VS</div>
                
                <div id="challenger-card" class="music-card rounded-xl overflow-hidden shadow-lg w-full md:w-96 slide-in">
                    <div class="h-56 bg-gray-900 flex items-center justify-center overflow-hidden relative">
                        <div class="music-image music-placeholder w-full h-full bg-center bg-cover flex items-center justify-center">
                            <div class="vinyl-container w-32 h-32 relative">
                                <div class="vinyl"></div>
                            </div>
                        </div>
                        <div class="play-indicator">
                            <div class="music-playing-animation">
                                <div class="music-bar music-bar-1" style="height: 10px;"></div>
                                <div class="music-bar music-bar-2" style="height: 15px;"></div>
                                <div class="music-bar music-bar-3" style="height: 8px;"></div>
                                <div class="music-bar music-bar-4" style="height: 12px;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="p-5">
                        <div class="music-title-bg p-3 mb-4">
                            <h3 class="song-title text-xl font-bold title-font">Challenger</h3>
                            <p class="artist-name subtitle-font">Artist Name</p>
                            <div class="flex flex-wrap mt-2">
                                <span class="genre-tag">Genre</span>
                            </div>
                        </div>
                        <button class="choose-btn btn w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 py-3 px-4 rounded-lg font-medium subtitle-font" data-index="1">
                            Choose This Song
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Music DNA Analysis Result Screen -->
        <div id="result-screen" class="hidden fade-in relative">
            <div class="flex flex-col items-center justify-center min-h-[80vh] py-8 relative z-10">
                <!-- Glowing Header -->
                <div class="text-center mb-10">
                    <h2 class="text-4xl md:text-5xl font-bold title-font neon-text mb-3">YOUR MUSIC DNA</h2>
                    <div class="w-60 h-1 bg-gradient-to-r from-purple-500 to-pink-500 mx-auto"></div>
                </div>
                
                <!-- Winner Card with Accents -->
                <div class="relative mb-10">
                    <div class="absolute -top-4 -left-4 w-8 h-8 border-t-2 border-l-2 border-purple-400"></div>
                    <div class="absolute -top-4 -right-4 w-8 h-8 border-t-2 border-r-2 border-pink-500"></div>
                    <div class="absolute -bottom-4 -left-4 w-8 h-8 border-b-2 border-l-2 border-purple-400"></div>
                    <div class="absolute -bottom-4 -right-4 w-8 h-8 border-b-2 border-r-2 border-pink-500"></div>
                    
                    <div id="winner-card" class="music-card rounded-xl overflow-hidden shadow-lg w-full max-w-md slide-in glow-border">
                        <div class="h-64 bg-gray-900 flex items-center justify-center overflow-hidden relative">
                            <div class="winner-image music-placeholder w-full h-full bg-center bg-cover flex items-center justify-center">
                                <div class="vinyl-container w-40 h-40 relative">
                                    <div class="vinyl"></div>
                                </div>
                            </div>
                            <div class="play-indicator">
                                <div class="music-playing-animation">
                                    <div class="music-bar music-bar-1" style="height: 10px;"></div>
                                    <div class="music-bar music-bar-2" style="height: 15px;"></div>
                                    <div class="music-bar music-bar-3" style="height: 8px;"></div>
                                    <div class="music-bar music-bar-4" style="height: 12px;"></div>
                                </div>
                            </div>
                        </div>
                        <div class="p-6">
                            <h3 class="winner-title text-2xl font-bold text-center title-font neon-text">Song Title</h3>
                            <p class="winner-artist text-center subtitle-font text-gray-300 mt-1">Artist Name</p>
                            <div class="flex flex-wrap justify-center mt-3">
                                <span class="genre-tag">Genre</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Music DNA Analysis -->
                <div class="music-card p-6 rounded-xl max-w-2xl mx-auto mb-10 glow-border">
                    <h3 class="text-2xl font-bold mb-4 text-center title-font text-purple-400">YOU ARE A <span id="listener-type" class="text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500">MELODIC DREAMER</span></h3>
                    
                    <p id="listener-description" class="text-gray-300 text-center mb-6 subtitle-font">Your music DNA reveals a deep appreciation for emotional melodies and atmospheric soundscapes. You connect with music on a profound level, often using it as an escape to create your own inner worlds. Music is not just entertainment for you—it's a companion for your most introspective moments.</p>
                    
                    <!-- DNA Visualization -->
                    <div class="dna-strand">
                        <div class="dna-node"></div>
                        <div class="dna-node"></div>
                        <div class="dna-node"></div>
                        <div class="dna-node"></div>
                        <div class="dna-node"></div>
                        <div class="dna-node"></div>
                        <div class="dna-node"></div>
                        <div class="dna-node"></div>
                        <div class="dna-node"></div>
                        <div class="dna-node"></div>
                        <div class="dna-node"></div>
                        <div class="dna-node"></div>
                        <div class="dna-node"></div>
                    </div>
                    
                    <!-- Music Preferences -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">
                        <div>
                            <h4 class="text-center text-purple-300 font-semibold mb-3 subtitle-font">GENRE AFFINITY</h4>
                            <div class="flex flex-col gap-3">
                                <div>
                                    <div class="flex justify-between text-xs mb-1">
                                        <span>EDM</span>
                                        <span id="genre-edm-percent">85%</span>
                                    </div>
                                    <div class="stat-bar">
                                        <div id="genre-edm" class="stat-fill-1" style="width: 85%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-xs mb-1">
                                        <span>Piano</span>
                                        <span id="genre-piano-percent">65%</span>
                                    </div>
                                    <div class="stat-bar">
                                        <div id="genre-piano" class="stat-fill-2" style="width: 65%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-xs mb-1">
                                        <span>Jazz</span>
                                        <span id="genre-jazz-percent">45%</span>
                                    </div>
                                    <div class="stat-bar">
                                        <div id="genre-jazz" class="stat-fill-3" style="width: 45%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="text-center text-purple-300 font-semibold mb-3 subtitle-font">MOOD PREFERENCE</h4>
                            <div class="flex flex-wrap justify-center">
                                <div class="mood-badge active">Chill</div>
                                <div class="mood-badge">Energetic</div>
                                <div class="mood-badge">Melancholic</div>
                                <div class="mood-badge">Uplifting</div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="text-center text-purple-300 font-semibold mb-3 subtitle-font">LISTENING STYLE</h4>
                            <div class="flex flex-col gap-3">
                                <div>
                                    <div class="flex justify-between text-xs mb-1">
                                        <span>Immersive</span>
                                        <span id="style-immersive-percent">90%</span>
                                    </div>
                                    <div class="stat-bar">
                                        <div id="style-immersive" class="stat-fill-1" style="width: 90%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-xs mb-1">
                                        <span>Background</span>
                                        <span id="style-background-percent">40%</span>
                                    </div>
                                    <div class="stat-bar">
                                        <div id="style-background" class="stat-fill-2" style="width: 40%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-xs mb-1">
                                        <span>Social</span>
                                        <span id="style-social-percent">55%</span>
                                    </div>
                                    <div class="stat-bar">
                                        <div id="style-social" class="stat-fill-3" style="width: 55%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div class="flex gap-6">
                    <button id="restart-button" class="btn bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-3 px-8 rounded-lg text-lg shadow-lg subtitle-font">
                        RESTART
                    </button>
                    <button id="share-button" class="btn bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white font-bold py-3 px-8 rounded-lg text-lg shadow-lg subtitle-font">
                        SHARE RESULT
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <footer class="footer fixed bottom-0 left-0 w-full py-3 px-4 text-center text-sm text-gray-400 z-10">
            <p>
                Made with <span class="heart">❤</span> by Barnik Bhai in 
                <span class="india-flag">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="16" viewBox="0 0 24 16" class="inline-block">
                        <rect width="24" height="5" fill="#FF9933"/>
                        <rect y="5" width="24" height="6" fill="#FFFFFF"/>
                        <rect y="11" width="24" height="5" fill="#138808"/>
                        <circle cx="12" cy="8" r="1.5" fill="#000080"/>
                    </svg>
                </span> 
                INDIA
            </p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get the click sound audio element
            const clickSound = document.getElementById('clickSound');

            // Function to play the click sound
            function playClickSound() {
                if (clickSound) {
                    clickSound.currentTime = 0; // Rewind to start for quick successive clicks
                    clickSound.play().catch(e => console.error("Error playing click sound:", e));
                }
            }

            // Add a global click listener to play the sound
            document.addEventListener('click', playClickSound);

            // Function to determine a basic genre based on artist or keywords
            function getBasicGenre(artist, title) {
                artist = artist.toLowerCase();
                title = title.toLowerCase();

                if (artist.includes("alan walker") || artist.includes("avicii") || artist.includes("kygo") || artist.includes("marshmello") || artist.includes("the chainsmokers") || artist.includes("david guetta") || artist.includes("meduza") || artist.includes("k-391") || artist.includes("illenium") || artist.includes("axwell") || artist.includes("egzod") || artist.includes("diviners") || artist.includes("cartoon") || artist.includes("thefatrat")) {
                    return "Electronic";
                }
                if (artist.includes("imagine dragons") || artist.includes("coldplay") || artist.includes("twenty one pilots") || artist.includes("the script") || artist.includes("glass animals") || artist.includes("royal & the serpent")) {
                    return "Rock";
                }
                if (artist.includes("justin bieber") || artist.includes("camila cabello") || artist.includes("sia") || artist.includes("pitbull") || artist.includes("sub urban") || artist.includes("jung kook") || artist.includes("lady gaga") || artist.includes("the kid laroi") || artist.includes("shawn mendes") || artist.includes("harry styles") || artist.includes("one direction") || artist.includes("ed sheeran") || artist.includes("alec benjamin") || artist.includes("lukas graham") || artist.includes("passenger") || artist.includes("post malone") || artist.includes("the weeknd") || artist.includes("boywithuke") || artist.includes("duncan laurence")) {
                    return "Pop";
                }
                if (artist.includes("joe hisaishi") || artist.includes("radwimps") || artist.includes("yoasobi") || artist.includes("kenshi yonezu") || artist.includes("queen bee") || artist.includes("物語シリーズ") || artist.includes("d4vd") || artist.includes("woodkid") || artist.includes("stromae") || artist.includes("manu pilas")) {
                    return "J-Pop/Anime"; // Grouping Japanese artists and anime-related
                }
                if (artist.includes("lil nas x") || artist.includes("juice wrld") || artist.includes("blackway") || artist.includes("ashnikko")) {
                    return "Hip Hop";
                }
                if (artist.includes("trinidad cardona") || artist.includes("ali sethi")) {
                    return "World";
                }
                if (artist.includes("gustavo santaolalla")) {
                    return "Soundtrack";
                }
                if (artist.includes("bewhy")) {
                    return "K-Pop";
                }
                if (artist.includes("fc barcelona")) {
                    return "Anthem";
                }
                if (artist.includes("geeks music")) {
                    return "Instrumental";
                }
                // Default or fallback genres
                if (title.includes("remix") || title.includes("electronic") || title.includes("edm")) {
                    return "Electronic";
                }
                if (title.includes("rock") || title.includes("band")) {
                    return "Rock";
                }
                if (title.includes("hip hop") || title.includes("rap")) {
                    return "Hip Hop";
                }
                return "Pop"; // Most common fallback
            }

            // Music data - all 99 songs from your CSV
            const songs = [
                { title: "Headlights (feat. KIDDO)", artist: "Alok", genre: getBasicGenre("Alok", "Headlights (feat. KIDDO)"), mood: "Unknown" },
                { title: "On My Way", artist: "Alan Walker", genre: getBasicGenre("Alan Walker", "On My Way"), mood: "Unknown" },
                { title: "Man On The Moon", artist: "Alan Walker", genre: getBasicGenre("Alan Walker", "Man On The Moon"), mood: "Unknown" },
                { title: "Paradise", artist: "Alan Walker", genre: getBasicGenre("Alan Walker", "Paradise"), mood: "Unknown" },
                { title: "Sing Me to Sleep", artist: "Alan Walker", genre: getBasicGenre("Alan Walker", "Sing Me to Sleep"), mood: "Unknown" },
                { title: "Fake A Smile", artist: "Alan Walker", genre: getBasicGenre("Alan Walker", "Fake A Smile"), mood: "Unknown" },
                { title: "All Falls Down (feat. Juliander)", artist: "Alan Walker", genre: getBasicGenre("Alan Walker", "All Falls Down (feat. Juliander)"), mood: "Unknown" },
                { title: "Lost Control", artist: "Alan Walker", genre: getBasicGenre("Alan Walker", "Lost Control"), mood: "Unknown" },
                { title: "Faded - Lost Stories Remix", artist: "Alan Walker", genre: getBasicGenre("Alan Walker", "Faded - Lost Stories Remix"), mood: "Unknown" },
                { title: "Ghost", artist: "Justin Bieber", genre: getBasicGenre("Justin Bieber", "Ghost"), mood: "Unknown" },
                { title: "Bam Bam (feat. Ed Sheeran)", artist: "Camila Cabello", genre: getBasicGenre("Camila Cabello", "Bam Bam (feat. Ed Sheeran)"), mood: "Unknown" },
                { title: "Peaches (feat. Daniel Caesar & Giveon)", artist: "Justin Bieber", genre: getBasicGenre("Justin Bieber", "Peaches (feat. Daniel Caesar & Giveon)"), mood: "Unknown" },
                { title: "Unstoppable", artist: "Sia", genre: getBasicGenre("Sia", "Unstoppable"), mood: "Unknown" },
                { title: "We Are One (Ole Ola) [The Official 2014 FIFA World Cup Song] (feat. Jennifer Lopez & Claudia Leitte)", artist: "Pitbull", genre: getBasicGenre("Pitbull", "We Are One (Ole Ola) [The Official 2014 FIFA World Cup Song] (feat. Jennifer Lopez & Claudia Leitte)"), mood: "Unknown" },
                { title: "Heat Waves", artist: "Glass Animals", genre: getBasicGenre("Glass Animals", "Heat Waves"), mood: "Unknown" },
                { title: "Alone", artist: "Alan Walker", genre: getBasicGenre("Alan Walker", "Alone"), mood: "Unknown" },
                { title: "Faded", artist: "Alan Walker", genre: getBasicGenre("Alan Walker", "Faded"), mood: "Unknown" },
                { title: "Hello World", artist: "Alan Walker", genre: getBasicGenre("Alan Walker", "Hello World"), mood: "Unknown" },
                { title: "One Summer Day", artist: "Joe Hisaishi", genre: getBasicGenre("Joe Hisaishi", "One Summer Day"), mood: "Unknown" },
                { title: "The Return", artist: "Joe Hisaishi", genre: getBasicGenre("Joe Hisaishi", "The Return"), mood: "Unknown" },
                { title: "Avem (The Aviation Theme)", artist: "Alan Walker", genre: getBasicGenre("Alan Walker", "Avem (The Aviation Theme)"), mood: "Unknown" },
                { title: "Millionaire (feat. Nelly) - Alan Walker Remix", artist: "Cash Cash", genre: getBasicGenre("Cash Cash", "Millionaire (feat. Nelly) - Alan Walker Remix"), mood: "Unknown" },
                { title: "Cradles", artist: "Sub Urban", genre: getBasicGenre("Sub Urban", "Cradles"), mood: "Unknown" },
                { title: "Different World (feat. CORSAK)", artist: "Alan Walker", genre: getBasicGenre("Alan Walker", "Different World (feat. CORSAK)"), mood: "Unknown" },
                { title: "In Your Arms (with X Ambassadors) [Alan Walker Remix]", artist: "ILLENIUM", genre: getBasicGenre("ILLENIUM", "In Your Arms (with X Ambassadors) [Alan Walker Remix]"), mood: "Unknown" },
                { title: "We'll Be Alright (Movie Edit)", artist: "RADWIMPS", genre: getBasicGenre("RADWIMPS", "We'll Be Alright (Movie Edit)"), mood: "Unknown" },
                { title: "Dreamers [Music from the FIFA World Cup Qatar 2022 Official Soundtrack]", artist: "Jung Kook", genre: getBasicGenre("Jung Kook", "Dreamers [Music from the FIFA World Cup Qatar 2022 Official Soundtrack]"), mood: "Unknown" },
                { title: "Sparkle - English Version", artist: "RADWIMPS", genre: getBasicGenre("RADWIMPS", "Sparkle - English Version"), mood: "Unknown" },
                { title: "Wednesday Main Titles", artist: "Danny Elfman", genre: getBasicGenre("Danny Elfman", "Wednesday Main Titles"), mood: "Unknown" },
                { title: "Is There Still Anything That Love Can Do? (English Version)", artist: "RADWIMPS", genre: getBasicGenre("RADWIMPS", "Is There Still Anything That Love Can Do? (English Version)"), mood: "Unknown" },
                { title: "Seasons", artist: "Rival", genre: getBasicGenre("Rival", "Seasons"), mood: "Unknown" },
                { title: "We'll Be Alright", artist: "RADWIMPS", genre: getBasicGenre("RADWIMPS", "We'll Be Alright"), mood: "Unknown" },
                { title: "Dream lantern", artist: "RADWIMPS", genre: getBasicGenre("RADWIMPS", "Dream lantern"), mood: "Unknown" },
                { title: "Sparkle - Original Version", artist: "RADWIMPS", genre: getBasicGenre("RADWIMPS", "Sparkle - Original Version"), mood: "Unknown" },
                { title: "Dream Lantern - English Version", artist: "RADWIMPS", genre: getBasicGenre("RADWIMPS", "Dream Lantern - English Version"), mood: "Unknown" },
                { title: "Nandemonaiya - movie ver.", artist: "RADWIMPS", genre: getBasicGenre("RADWIMPS", "Nandemonaiya - movie ver."), mood: "Unknown" },
                { title: "Bloody Mary", artist: "Lady Gaga", genre: getBasicGenre("Lady Gaga", "Bloody Mary"), mood: "Unknown" },
                { title: "Zenzenzense - movie ver.", artist: "RADWIMPS", genre: getBasicGenre("RADWIMPS", "Zenzenzense - movie ver."), mood: "Unknown" },
                { title: "STAY (with Justin Bieber)", artist: "The Kid LAROI", genre: getBasicGenre("The Kid LAROI", "STAY (with Justin Bieber)"), mood: "Unknown" },
                { title: "Running Out Of Roses", artist: "Alan Walker", genre: getBasicGenre("Alan Walker", "Running Out Of Roses"), mood: "Unknown" },
                { title: "STAY (with Justin Bieber)", artist: "The Kid LAROI", genre: getBasicGenre("The Kid LAROI", "STAY (with Justin Bieber)"), mood: "Unknown" },
                { title: "Savannah", artist: "Diviners", genre: getBasicGenre("Diviners", "Savannah"), mood: "Unknown" },
                { title: "Opening Song - Merry-Go-Round of Life", artist: "Joe Hisaishi", genre: getBasicGenre("Joe Hisaishi", "Opening Song - Merry-Go-Round of Life"), mood: "Unknown" },
                { title: "Is There Still Anything That Love Can Do?", artist: "RADWIMPS", genre: getBasicGenre("RADWIMPS", "Is There Still Anything That Love Can Do?"), mood: "Unknown" },
                { title: "DARKSIDE", artist: "Neoni", genre: getBasicGenre("Neoni", "DARKSIDE"), mood: "Unknown" },
                { title: "Bones", artist: "Imagine Dragons", genre: getBasicGenre("Imagine Dragons", "Bones"), mood: "Unknown" },
                { title: "Enemy (with JID) - from the series Arcane League of Legends", artist: "Imagine Dragons", genre: getBasicGenre("Imagine Dragons", "Enemy (with JID) - from the series Arcane League of Legends)"), mood: "Unknown" },
                { title: "Believer", artist: "Imagine Dragons", genre: getBasicGenre("Imagine Dragons", "Believer"), mood: "Unknown" },
                { title: "Side by Side", artist: "BewhY", genre: getBasicGenre("BewhY", "Side by Side"), mood: "Unknown" },
                { title: "Stranger Things (feat. OneRepublic) - Alan Walker Remix", artist: "Kygo", genre: getBasicGenre("Kygo", "Stranger Things (feat. OneRepublic) - Alan Walker Remix"), mood: "Unknown" },
                { title: "Paradise", artist: "Alan Walker", genre: getBasicGenre("Alan Walker", "Paradise"), mood: "Unknown" },
                { title: "Dar um Jeito (We Will Find a Way) [The Official 2014 FIFA World Cup Anthem] (feat. Avicii & Alexandre Pires)", artist: "Carlos Santana", genre: getBasicGenre("Carlos Santana", "Dar um Jeito (We Will Find a Way) [The Official 2014 FIFA World Cup Anthem] (feat. Avicii & Alexandre Pires)"), mood: "Unknown" },
                { title: "Cheap Thrills", artist: "Sia", genre: getBasicGenre("Sia", "Cheap Thrills"), mood: "Unknown" },
                { title: "KANATA HALUKA", artist: "RADWIMPS", genre: getBasicGenre("RADWIMPS", "KANATA HALUKA"), mood: "Unknown" },
                { title: "Demons", artist: "Imagine Dragons", genre: getBasicGenre("Imagine Dragons", "Demons"), mood: "Unknown" },
                { title: "Suzume (feat. Toaka)", artist: "RADWIMPS", genre: getBasicGenre("RADWIMPS", "Suzume (feat. Toaka)"), mood: "Unknown" },
                { title: "アイドル", artist: "YOASOBI", genre: getBasicGenre("YOASOBI", "アイドル"), mood: "Unknown" },
                { title: "メフィスト", artist: "QUEEN BEE", genre: getBasicGenre("QUEEN BEE", "メフィスト"), mood: "Unknown" },
                { title: "Cheap Thrills", artist: "Sia", genre: getBasicGenre("Sia", "Cheap Thrills"), mood: "Unknown" },
                { title: "夜に駆ける", artist: "YOASOBI", genre: getBasicGenre("YOASOBI", "夜に駆ける"), mood: "Unknown" },
                { title: "Heathens", artist: "Twenty One Pilots", genre: getBasicGenre("Twenty One Pilots", "Heathens"), mood: "Unknown" },
                { title: "祝福", artist: "YOASOBI", genre: getBasicGenre("YOASOBI", "祝福"), mood: "Unknown" },
                { title: "Infinity", artist: "Jaymes Young", genre: getBasicGenre("Jaymes Young", "Infinity"), mood: "Unknown" },
                { title: "群青", artist: "YOASOBI", genre: getBasicGenre("YOASOBI", "群青"), mood: "Unknown" },
                { title: "Love Yourself", artist: "Justin Bieber", genre: getBasicGenre("Justin Bieber", "Love Yourself"), mood: "Unknown" },
                { title: "The Nights", artist: "Avicii", genre: getBasicGenre("Avicii", "The Nights"), mood: "Unknown" },
                { title: "Royalty", artist: "Egzod", genre: getBasicGenre("Egzod", "Royalty"), mood: "Unknown" },
                { title: "No Lie", artist: "Sean Paul", genre: getBasicGenre("Sean Paul", "No Lie"), mood: "Unknown" },
                { title: "WITHOUT YOU", artist: "The Kid LAROI", genre: getBasicGenre("The Kid LAROI", "WITHOUT YOU"), mood: "Unknown" },
                { title: "Aurora", artist: "K-391", genre: getBasicGenre("K-391", "Aurora"), mood: "Unknown" },
                { title: "Legends Never Die - (Remix)", artist: "League of Legends", genre: getBasicGenre("League of Legends", "Legends Never Die - (Remix)"), mood: "Unknown" },
                { title: "Lemon", artist: "Kenshi Yonezu", genre: getBasicGenre("Kenshi Yonezu", "Lemon"), mood: "Unknown" },
                { title: "Lonely World", artist: "K-391", genre: getBasicGenre("K-391", "Lonely World"), mood: "Unknown" },
                { title: "Bad Liar", artist: "Imagine Dragons", genre: getBasicGenre("Imagine Dragons", "Bad Liar"), mood: "Unknown" },
                { title: "Waiting For Love", artist: "Avicii", genre: getBasicGenre("Avicii", "Waiting For Love"), mood: "Unknown" },
                { title: "The Spectre", artist: "Alan Walker", genre: getBasicGenre("Alan Walker", "The Spectre"), mood: "Unknown" },
                { title: "Move Your Body - Alan Walker Remix", artist: "Sia", genre: getBasicGenre("Sia", "Move Your Body - Alan Walker Remix"), mood: "Unknown" },
                { title: "あの夢をなぞって", artist: "YOASOBI", genre: getBasicGenre("YOASOBI", "あの夢をなぞって"), mood: "Unknown" },
                { title: "Natural", artist: "Imagine Dragons", genre: getBasicGenre("Imagine Dragons", "Natural"), mood: "Unknown" },
                { title: "KICK BACK", artist: "Kenshi Yonezu", genre: getBasicGenre("Kenshi Yonezu", "KICK BACK"), mood: "Unknown" },
                { title: "Pasoori", artist: "Ali Sethi", genre: getBasicGenre("Ali Sethi", "Pasoori"), mood: "Unknown" },
                { title: "More Than You Know", artist: "Axwell /\ Ingrosso", genre: getBasicGenre("Axwell /\ Ingrosso", "More Than You Know"), mood: "Unknown" },
                { title: "End of Time", artist: "K-391", genre: getBasicGenre("K-391", "End of Time"), mood: "Unknown" },
                { title: "I Ain't Worried", artist: "OneRepublic", genre: getBasicGenre("OneRepublic", "I Ain't Worried"), mood: "Unknown" },
                { title: "Warriors", artist: "Imagine Dragons", genre: getBasicGenre("Imagine Dragons", "Warriors"), mood: "Unknown" },
                { title: "The Last of Us", artist: "Gustavo Santaolalla", genre: getBasicGenre("Gustavo Santaolalla", "The Last of Us"), mood: "Unknown" },
                { title: "INDUSTRY BABY (feat. Jack Harlow)", artist: "Lil Nas X", genre: getBasicGenre("Lil Nas X", "INDUSTRY BABY (feat. Jack Harlow)"), mood: "Unknown" },
                { title: "Toxic", artist: "BoyWithUke", genre: getBasicGenre("BoyWithUke", "Toxic"), mood: "Unknown" },
                { title: "勇者", artist: "YOASOBI", genre: getBasicGenre("YOASOBI", "勇者"), mood: "Unknown" },
                { title: "Without You (feat. Sandro Cavazza)", artist: "Avicii", genre: getBasicGenre("Avicii", "Without You (feat. Sandro Cavazza)"), mood: "Unknown" },
                { title: "Thunder", artist: "Imagine Dragons", genre: getBasicGenre("Imagine Dragons", "Thunder"), mood: "Unknown" },
                { title: "Counting Stars", artist: "OneRepublic", genre: getBasicGenre("OneRepublic", "Counting Stars"), mood: "Unknown" },
                { title: "Hayya Hayya (Better Together) - Music from the FIFA World Cup Qatar 2022 Official Soundtrack", artist: "Trinidad Cardona", genre: getBasicGenre("Trinidad Cardona", "Hayya Hayya (Better Together) - Music from the FIFA World Cup Qatar 2022 Official Soundtrack)"), mood: "Unknown" },
                { title: "Sunflower - Spider-Man: Into the Spider-Verse", artist: "Post Malone", genre: getBasicGenre("Post Malone", "Sunflower - Spider-Man: Into the Spider-Verse"), mood: "Unknown" },
                { title: "What's Up Danger (with Black Caviar)", artist: "Blackway", genre: getBasicGenre("Blackway", "What's Up Danger (with Black Caviar)"), mood: "Unknown" },
                { title: "Blue Moon", artist: "Paul Hand", genre: getBasicGenre("Paul Hand", "Blue Moon"), mood: "Unknown" },
                { title: "Circles", artist: "Post Malone", genre: getBasicGenre("Post Malone", "Circles"), mood: "Unknown" },
                { title: "Pirates Of The Caribbean - Main Theme - He's A Pirate", artist: "Geek Music", genre: getBasicGenre("Geek Music", "Pirates Of The Caribbean - Main Theme - He's A Pirate"), mood: "Unknown" },
                { title: "恋愛サーキュレーション", artist: "物語シリーズ", genre: getBasicGenre("物語シリーズ", "恋愛サーキュレーション"), mood: "Unknown" },
                { title: "Lucid Dreams", artist: "Juice WRLD", genre: getBasicGenre("Juice WRLD", "Lucid Dreams"), mood: "Unknown" },
                { title: "Fire - Official UEFA EURO 2024 Song", artist: "MEDUZA", genre: getBasicGenre("MEDUZA", "Fire - Official UEFA EURO 2024 Song"), mood: "Unknown" },
                { title: "As It Was", artist: "Harry Styles", genre: getBasicGenre("Harry Styles", "As It Was"), mood: "Unknown" },
                { title: "Story of My Life", artist: "One Direction", genre: getBasicGenre("One Direction", "Story of My Life"), mood: "Unknown" },
                { title: "WRONG (feat. Lil Mosey)", artist: "The Kid LAROI", genre: getBasicGenre("The Kid LAROI", "WRONG (feat. Lil Mosey)"), mood: "Unknown" },
                { title: "Sorry", artist: "Justin Bieber", genre: getBasicGenre("Justin Bieber", "Sorry"), mood: "Unknown" },
                { title: "Levels - Radio Edit", artist: "Avicii", genre: getBasicGenre("Avicii", "Levels - Radio Edit"), mood: "Unknown" },
                { title: "Hey Brother", artist: "Avicii", genre: getBasicGenre("Avicii", "Hey Brother"), mood: "Unknown" },
                { title: "Alone, Pt. II", artist: "Alan Walker", genre: getBasicGenre("Alan Walker", "Alone, Pt. II"), mood: "Unknown" },
                { title: "Heading Home", artist: "Alan Walker", genre: getBasicGenre("Alan Walker", "Heading Home"), mood: "Unknown" },
                { title: "Shape of You", artist: "Ed Sheeran", genre: getBasicGenre("Ed Sheeran", "Shape of You"), mood: "Unknown" },
                { title: "Lily", artist: "Alan Walker", genre: getBasicGenre("Alan Walker", "Lily"), mood: "Unknown" },
                { title: "Ignite", artist: "Alan Walker", genre: getBasicGenre("Alan Walker", "Ignite"), mood: "Unknown" },
                { title: "The Drum", artist: "Alan Walker", genre: getBasicGenre("Alan Walker", "The Drum"), mood: "Unknown" },
                { title: "Levels - Original Version", artist: "Avicii", genre: getBasicGenre("Avicii", "Levels - Original Version"), mood: "Unknown" },
                { title: "The Days", artist: "Avicii", genre: getBasicGenre("Avicii", "The Days"), mood: "Unknown" },
                { title: "Arcade", artist: "Duncan Laurence", genre: getBasicGenre("Duncan Laurence", "Arcade"), mood: "Unknown" },
                { title: "Wake Me Up", artist: "Avicii", genre: getBasicGenre("Avicii", "Wake Me Up"), mood: "Unknown" },
                { title: "Lonely Together (feat. Rita Ora)", artist: "Avicii", genre: getBasicGenre("Avicii", "Lonely Together (feat. Rita Ora)"), mood: "Unknown" },
                { title: "Blinding Lights", artist: "The Weeknd", genre: getBasicGenre("The Weeknd", "Blinding Lights"), mood: "Unknown" },
                { title: "Starboy", artist: "The Weeknd", genre: getBasicGenre("The Weeknd", "Starboy"), mood: "Unknown" },
                { title: "I Had Some Help (Feat. Morgan Wallen)", artist: "Post Malone", genre: getBasicGenre("Post Malone", "I Had Some Help (Feat. Morgan Wallen)"), mood: "Unknown" },
                { title: "がらくた - JUNK", artist: "Kenshi Yonezu", genre: getBasicGenre("Kenshi Yonezu", "がらくた - JUNK"), mood: "Unknown" },
                { title: "Ma Meilleure Ennemie (from the series Arcane League of Legends)", artist: "Stromae", genre: getBasicGenre("Stromae", "Ma Meilleure Ennemie (from the series Arcane League of Legends)"), mood: "Unknown" },
                { title: "Remember Me (from the series Arcane League of Legends)", artist: "d4vd", genre: getBasicGenre("d4vd", "Remember Me (from the series Arcane League of Legends)"), mood: "Unknown" },
                { title: "Wasteland (from the series Arcane League of Legends)", artist: "Royal & the Serpent", genre: getBasicGenre("Royal & the Serpent", "Wasteland (from the series Arcane League of Legends)"), mood: "Unknown" },
                { title: "The Line (from the series Arcane League of Legends)", artist: "Twenty One Pilots", genre: getBasicGenre("Twenty One Pilots", "The Line (from the series Arcane League of Legends)"), mood: "Unknown" },
                { title: "To Ashes and Blood (from the series Arcane League of Legends)", artist: "Woodkid", genre: getBasicGenre("Woodkid", "To Ashes and Blood (from the series Arcane League of Legends)"), mood: "Unknown" },
                { title: "Spin The Wheel (from the series Arcane League of Legends)", artist: "Arcane", genre: getBasicGenre("Arcane", "Spin The Wheel (from the series Arcane League of Legends)"), mood: "Unknown" },
                { title: "Bella Ciao - Música Original de la Serie la Casa de Papel/ Money Heist", artist: "Manu Pilas", genre: getBasicGenre("Manu Pilas", "Bella Ciao - Música Original de la Serie la Casa de Papel/ Money Heist"), mood: "Unknown" },
                { title: "I Don't Wanna Wait", artist: "David Guetta", genre: getBasicGenre("David Guetta", "I Don't Wanna Wait"), mood: "Unknown" },
                { title: "Watermelon Sugar", artist: "Harry Styles", genre: getBasicGenre("Harry Styles", "Watermelon Sugar"), mood: "Unknown" },
                { title: "Stars Will Align", artist: "Kygo", genre: getBasicGenre("Kygo", "Stars Will Align"), mood: "Unknown" },
                { title: "Paint The Town Blue (from the series Arcane League of Legends)", artist: "Ashnikko", genre: getBasicGenre("Ashnikko", "Paint The Town Blue (from the series Arcane League of Legends)"), mood: "Unknown" },
                { title: "Enemy with JID (Opening Title Version) (from the series Arcane League of Legends)", artist: "Imagine Dragons", genre: getBasicGenre("Imagine Dragons", "Enemy with JID (Opening Title Version) (from the series Arcane League of Legends)"), mood: "Unknown" },
                { title: "A Sky Full of Stars", artist: "Coldplay", genre: getBasicGenre("Coldplay", "A Sky Full of Stars"), mood: "Unknown" },
                { title: "Hymn for the Weekend", artist: "Coldplay", genre: getBasicGenre("Coldplay", "Hymn for the Weekend"), mood: "Unknown" },
                { title: "Closer", artist: "The Chainsmokers", genre: getBasicGenre("The Chainsmokers", "Closer"), mood: "Unknown" },
                { title: "Heaven", artist: "Avicii", genre: getBasicGenre("Avicii", "Heaven"), mood: "Unknown" },
                { title: "Save Your Tears (Remix) (with Ariana Grande) - Bonus Track", artist: "The Weeknd", genre: getBasicGenre("The Weeknd", "Save Your Tears (Remix) (with Ariana Grande) - Bonus Track)"), mood: "Unknown" },
                { title: "Baby", artist: "Justin Bieber", genre: getBasicGenre("Justin Bieber", "Baby"), mood: "Unknown" },
                { title: "Strongest (Alan Walker Remix)", artist: "Ina Wroldsen", genre: getBasicGenre("Ina Wroldsen", "Strongest (Alan Walker Remix)"), mood: "Unknown" },
                { title: "Broken Arrows", artist: "Avicii", genre: getBasicGenre("Avicii", "Broken Arrows"), mood: "Unknown" },
                { title: "Something Just Like This", artist: "The Chainsmokers", genre: getBasicGenre("The Chainsmokers", "Something Just Like This"), mood: "Unknown" },
                { title: "Rise Up", artist: "TheFatRat", genre: getBasicGenre("TheFatRat", "Rise Up"), mood: "Unknown" },
                { title: "Treat You Better", artist: "Shawn Mendes", genre: getBasicGenre("Shawn Mendes", "Treat You Better"), mood: "Unknown" },
                { title: "On & On", artist: "Cartoon", genre: getBasicGenre("Cartoon", "On & On"), mood: "Unknown" },
                { title: "Sunshine", artist: "OneRepublic", genre: getBasicGenre("OneRepublic", "Sunshine"), mood: "Unknown" },
                { title: "Viva La Vida", artist: "Coldplay", genre: getBasicGenre("Coldplay", "Viva La Vida"), mood: "Unknown" },
                { title: "Happier", artist: "Marshmello", genre: getBasicGenre("Marshmello", "Happier"), mood: "Unknown" },
                { title: "Let Her Go", artist: "Passenger", genre: getBasicGenre("Passenger", "Let Her Go"), mood: "Unknown" },
                { title: "Let Me Down Slowly", artist: "Alec Benjamin", genre: getBasicGenre("Alec Benjamin", "Let Me Down Slowly"), mood: "Unknown" },
                { title: "7 Years", artist: "Lukas Graham", genre: getBasicGenre("Lukas Graham", "7 Years"), mood: "Unknown" },
                { title: "Superheroes", artist: "The Script", genre: getBasicGenre("The Script", "Superheroes"), mood: "Unknown" },
                { title: "Hall of Fame (feat. will.i.am)", artist: "The Script", genre: getBasicGenre("The Script", "Hall of Fame (feat. will.i.am)"), mood: "Unknown" },
                { title: "L'escut al pit (cant oficial del 125è aniversari del Barça)", artist: "FC Barcelona", genre: getBasicGenre("FC Barcelona", "L'escut al pit (cant oficial del 125è aniversari del Barça)"), mood: "Unknown" },
                { title: "Sapphire", artist: "Ed Sheeran", genre: getBasicGenre("Ed Sheeran", "Sapphire"), mood: "Unknown" },
                { title: "Night Changes", artist: "One Direction", genre: getBasicGenre("One Direction", "Night Changes"), mood: "Unknown" },
                { title: "Yellow", artist: "Coldplay", genre: getBasicGenre("Coldplay", "Yellow"), mood: "Unknown" },
                { title: "For the First Time", artist: "The Script", genre: getBasicGenre("The Script", "For the First Time"), mood: "Unknown" },
                { title: "The Scientist", artist: "Coldplay", genre: getBasicGenre("Coldplay", "The Scientist"), mood: "Unknown" },
                { title: "Nothing", artist: "The Script", genre: getBasicGenre("The Script", "Nothing"), mood: "Unknown" },
                { title: "Paradise", artist: "Coldplay", genre: getBasicGenre("Coldplay", "Paradise"), mood: "Unknown" }
            ];
            
            // Function to assign video filenames based on the first two letters of the song title
            // and sequential numbering for duplicates.
            function assignVideoFilenames(songsArray) {
                const prefixCounts = new Map(); // Map to store counts for each two-letter prefix

                songsArray.forEach(song => {
                    const prefix = song.title.substring(0, 2).toLowerCase().replace(/[^a-z0-9]/g, ''); // Clean prefix
                    if (prefix.length < 2) { // Handle very short or non-alphanumeric titles
                        song.video = `default${songsArray.indexOf(song) + 1}.mp4`; // Fallback to default naming
                        return;
                    }
                    let count = prefixCounts.get(prefix) || 0;
                    count++;
                    prefixCounts.set(prefix, count);
                    song.video = `${prefix}${count}.mp4`;
                });
            }

            // Call the function to assign video filenames to your songs
            assignVideoFilenames(songs);

            // Music categories for analysis (updated to reflect potential new genres)
            const musicCategories = {
                electronic: songs.filter(s => s.genre === "Electronic").map(s => s.title),
                pop: songs.filter(s => s.genre === "Pop").map(s => s.title),
                rock: songs.filter(s => s.genre === "Rock").map(s => s.title),
                "j-pop/anime": songs.filter(s => s.genre === "J-Pop/Anime").map(s => s.title),
                "hip hop": songs.filter(s => s.genre === "Hip Hop").map(s => s.title),
                world: songs.filter(s => s.genre === "World").map(s => s.title),
                soundtrack: songs.filter(s => s.genre === "Soundtrack").map(s => s.title),
                "k-pop": songs.filter(s => s.genre === "K-Pop").map(s => s.title),
                anthem: songs.filter(s => s.genre === "Anthem").map(s => s.title),
                instrumental: songs.filter(s => s.genre === "Instrumental").map(s => s.title),
                unknown: songs.filter(s => s.genre === "Unknown").map(s => s.title) // Catch-all for unassigned
            };
            
            // Music moods for analysis (only "Unknown" will be relevant unless you add more)
            const musicMoods = {
                unknown: songs.filter(s => s.mood === "Unknown").map(s => s.title)
            };
            
            // Listener types based on music preferences
            const listenerTypes = [
                {
                    type: "RHYTHM ENTHUSIAST",
                    description: "Your music DNA reveals a deep connection to rhythm and beat. You're drawn to music that makes you move, whether it's the pulsing energy of Electronic music or the groove of Hip Hop. For you, music is a physical experience that energizes and invigorates.",
                    genres: { electronic: 90, pop: 60, "hip hop": 75, rock: 40, "j-pop/anime": 30, world: 50, soundtrack: 20, "k-pop": 65, anthem: 40, instrumental: 20 },
                    moods: ["Unknown"] // Adjusted for generic mood
                },
                {
                    type: "MELODIC DREAMER",
                    description: "Your music DNA reveals a deep appreciation for emotional melodies and atmospheric soundscapes. You connect with music on a profound level, often using it as an escape to create your own inner worlds. Music is not just entertainment for you—it's a companion for your most introspective moments.",
                    genres: { pop: 75, rock: 60, "j-pop/anime": 85, electronic: 65, world: 70, soundtrack: 80, "k-pop": 70, anthem: 50, instrumental: 75 },
                    moods: ["Unknown"] // Adjusted for generic mood
                },
                {
                    type: "LYRICAL ANALYST",
                    description: "Your music DNA shows you value the poetry and storytelling in songs. You listen closely to lyrics and appreciate artists who craft meaningful narratives and express complex emotions through their words. For you, music is a form of literature that speaks directly to your experiences and thoughts.",
                    genres: { "hip hop": 80, rock: 70, "j-pop/anime": 85, pop: 50, electronic: 40, world: 60, soundtrack: 50, "k-pop": 60, anthem: 70, instrumental: 30 },
                    moods: ["Unknown"] // Adjusted for generic mood
                },
                {
                    type: "GENRE EXPLORER",
                    description: "Your music DNA reveals an eclectic taste that transcends genre boundaries. You're curious and open-minded, always seeking new sounds and musical experiences. Rather than sticking to one style, you appreciate the unique qualities each genre brings and how they reflect different cultures and eras.",
                    genres: { electronic: 75, pop: 75, rock: 75, "j-pop/anime": 75, "hip hop": 75, world: 75, soundtrack: 75, "k-pop": 75, anthem: 75, instrumental: 75 },
                    moods: ["Unknown"] // Adjusted for generic mood
                },
                {
                    type: "EMOTIONAL RESONATOR",
                    description: "Your music DNA shows you use music primarily as an emotional outlet and mirror. You're drawn to songs that validate your feelings and help you process life's highs and lows. Music serves as your emotional companion, providing comfort during difficult times and amplifying your joy during good ones.",
                    genres: { pop: 85, rock: 70, electronic: 75, "j-pop/anime": 80, "hip hop": 65, world: 70, soundtrack: 85, "k-pop": 80, anthem: 60, instrumental: 70 },
                    moods: ["Unknown"] // Adjusted for generic mood
                }
            ];
            
            // Music state
            let remainingSongs = [...songs];
            let currentChampion = null;
            let battleCount = 0;
            let totalBattles = songs.length - 1; // Total battles will be (number of songs - 1)
            let currentlyPlaying = null;
            
            // DOM elements
            const homeScreen = document.getElementById('home-screen');
            const battleScreen = document.getElementById('battle-screen');
            const resultScreen = document.getElementById('result-screen');
            const startButton = document.getElementById('start-button');
            const restartButton = document.getElementById('restart-button');
            const shareButton = document.getElementById('share-button');
            const currentBattleEl = document.getElementById('current-battle');
            const totalBattlesEl = document.getElementById('total-battles');
            const songsRemainingEl = document.getElementById('songs-remaining');
            const progressFill = document.getElementById('progress-fill');
            
            // Initialize stars
            function createStars() {
                const starsContainer = document.getElementById('stars');
                for (let i = 0; i < 200; i++) {
                    const star = document.createElement('div');
                    star.classList.add('star');
                    star.style.left = `${Math.random() * 100}%`;
                    star.style.top = `${Math.random() * 100}%`;
                    star.style.width = `${Math.random() * 2 + 1}px`;
                    star.style.height = star.style.width;
                    star.style.animationDelay = `${Math.random() * 5}s`;
                    starsContainer.appendChild(star);
                }
            }
            
            // Initialize floating music notes
            function createFloatingNotes() {
                const notesContainer = document.getElementById('floating-notes');
                const notes = ['♪', '♫', '♬', '♩', '♭', '♮', '♯'];
                
                for (let i = 0; i < 30; i++) {
                    const note = document.createElement('div');
                    note.classList.add('music-note');
                    note.textContent = notes[Math.floor(Math.random() * notes.length)];
                    note.style.left = `${Math.random() * 100}%`;
                    note.style.animationDelay = `${Math.random() * 15}s`;
                    note.style.animationDuration = `${15 + Math.random() * 10}s`;
                    note.style.opacity = `${Math.random() * 0.5 + 0.1}`;
                    note.style.fontSize = `${Math.random() * 20 + 15}px`;
                    notesContainer.appendChild(note);
                }
            }
            
            // Click effect
            document.addEventListener('click', function(e) {
                // Create ripple effect
                const ripple = document.createElement('div');
                ripple.classList.add('click-ripple');
                ripple.style.left = `${e.pageX}px`;
                ripple.style.top = `${e.pageY}px`;
                document.body.appendChild(ripple);
                
                // Create visual click effect
                const visualClick = document.createElement('div');
                visualClick.classList.add('visual-click');
                visualClick.style.left = `${e.pageX}px`;
                visualClick.style.top = `${e.pageY}px`;
                document.body.appendChild(visualClick);
                
                // Create particles
                const colors = ['#c084fc', '#e879f9', '#60a5fa', '#f472b6', '#a78bfa'];
                for (let i = 0; i < 8; i++) {
                    const particle = document.createElement('div');
                    particle.classList.add('click-particle');
                    particle.style.width = `${Math.random() * 10 + 5}px`;
                    particle.style.height = particle.style.width;
                    particle.style.left = `${e.pageX}px`;
                    particle.style.top = `${e.pageY}px`;
                    particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                    particle.style.animation = `particleAnimation ${Math.random() * 0.6 + 0.4}s forwards`;
                    document.body.appendChild(particle);
                    
                    // Random direction
                    const angle = Math.random() * Math.PI * 2;
                    const distance = Math.random() * 100 + 50;
                    const x = Math.cos(angle) * distance;
                    const y = Math.sin(angle) * distance;
                    
                    setTimeout(() => {
                        particle.style.transform = `translate(${x}px, ${y}px) scale(${Math.random() * 0.5 + 0.5})`;
                        particle.style.opacity = '0';
                    }, 10);
                    
                    // Remove particle after animation
                    setTimeout(() => {
                        particle.remove();
                    }, 1000);
                }
                
                // Remove ripple after animation
                setTimeout(() => {
                    ripple.remove();
                }, 600);
                
                // Remove visual click after animation
                setTimeout(() => {
                    visualClick.remove();
                }, 500);
            });
            
            // Start battle
            function startBattle() {
                homeScreen.classList.add('hidden');
                battleScreen.classList.remove('hidden');
                
                // Set up first battle
                if (!currentChampion) {
                    // First song becomes champion
                    currentChampion = remainingSongs.shift();
                }
                
                const challenger = remainingSongs.shift();
                updateBattleUI(currentChampion, challenger);
            }
            
            // Update battle UI
            function updateBattleUI(champion, challenger) {
                battleCount++;
                currentBattleEl.textContent = battleCount;
                totalBattlesEl.textContent = totalBattles;
                songsRemainingEl.textContent = remainingSongs.length;
                
                // Update progress bar
                const progress = (battleCount / totalBattles) * 100;
                progressFill.style.width = `${progress}%`;
                
                // Update song cards
                const championCardTitle = document.querySelector('#champion-card .song-title');
                const championCardArtist = document.querySelector('#champion-card .artist-name');
                const championCardGenre = document.querySelector('#champion-card .genre-tag');
                const championCardImage = document.querySelector('#champion-card .music-image');
                const championCardVideo = document.createElement('video'); // Create video element
                championCardVideo.src = champion.video; // Set video source
                championCardVideo.loop = true;
                championCardVideo.muted = true;
                championCardVideo.autoplay = true;
                championCardVideo.classList.add('absolute', 'inset-0', 'w-full', 'h-full', 'object-cover', 'z-0');
                
                const challengerCardTitle = document.querySelector('#challenger-card .song-title');
                const challengerCardArtist = document.querySelector('#challenger-card .artist-name');
                const challengerCardGenre = document.querySelector('#challenger-card .genre-tag');
                const challengerCardImage = document.querySelector('#challenger-card .music-image');
                const challengerCardVideo = document.createElement('video'); // Create video element
                challengerCardVideo.src = challenger.video; // Set video source
                challengerCardVideo.loop = true;
                challengerCardVideo.muted = true;
                challengerCardVideo.autoplay = true;
                challengerCardVideo.classList.add('absolute', 'inset-0', 'w-full', 'h-full', 'object-cover', 'z-0');

                // Clear previous content and append video
                championCardImage.innerHTML = ''; // Clear placeholder or previous video
                championCardImage.appendChild(championCardVideo);
                
                challengerCardImage.innerHTML = ''; // Clear placeholder or previous video
                challengerCardImage.appendChild(challengerCardVideo);
                
                championCardTitle.textContent = champion.title;
                championCardArtist.textContent = champion.artist;
                championCardGenre.textContent = champion.genre;
                
                challengerCardTitle.textContent = challenger.title;
                challengerCardArtist.textContent = challenger.artist;
                challengerCardGenre.textContent = challenger.genre;
                
                // Reset playing state
                document.querySelectorAll('.music-card').forEach(card => {
                    card.classList.remove('playing');
                });
                currentlyPlaying = null;
            }
            
            // Choose winner
            function chooseWinner(index) {
                const winner = index === 0 ? currentChampion : {
                    title: document.querySelector('#challenger-card .song-title').textContent,
                    artist: document.querySelector('#challenger-card .artist-name').textContent,
                    genre: document.querySelector('#challenger-card .genre-tag').textContent,
                    mood: "Unknown", // Challenger's mood is also unknown
                    video: document.querySelector('#challenger-card .music-image video').src // Get video from challenger
                };
                
                // Update champion
                currentChampion = winner;
                
                // Check if battle is over
                if (remainingSongs.length === 0) {
                    showResult(winner);
                } else {
                    startBattle();
                }
            }
            
            // Show result
            function showResult(winner) {
                battleScreen.classList.add('hidden');
                resultScreen.classList.remove('hidden');
                
                // Update winner card
                document.querySelector('.winner-title').textContent = winner.title;
                document.querySelector('.winner-artist').textContent = winner.artist;
                document.querySelector('#winner-card .genre-tag').textContent = winner.genre;
                
                const winnerImageContainer = document.querySelector('#winner-card .winner-image');
                winnerImageContainer.innerHTML = ''; // Clear previous content
                const winnerVideo = document.createElement('video');
                winnerVideo.src = winner.video;
                winnerVideo.loop = true;
                winnerVideo.muted = true;
                winnerVideo.autoplay = true;
                winnerVideo.classList.add('absolute', 'inset-0', 'w-full', 'h-full', 'object-cover', 'z-0');
                winnerImageContainer.appendChild(winnerVideo);

                // Analyze listener type based on winner
                const listenerType = analyzeListenerType(winner);
                document.getElementById('listener-type').textContent = listenerType.type;
                document.getElementById('listener-description').textContent = listenerType.description;
                
                // Update genre stats (using the new genre categories)
                // Note: These percentages are hardcoded in the listenerTypes for now.
                // To make them dynamic, you'd need to track chosen genres throughout the battle.
                document.getElementById('genre-edm').style.width = `${listenerType.genres.electronic || 0}%`;
                document.getElementById('genre-edm-percent').textContent = `${listenerType.genres.electronic || 0}%`;
                
                document.getElementById('genre-piano').style.width = `${listenerType.genres.pop || 0}%`; // Using Pop as a placeholder for Piano
                document.getElementById('genre-piano-percent').textContent = `${listenerType.genres.pop || 0}%`;
                
                document.getElementById('genre-jazz').style.width = `${listenerType.genres["j-pop/anime"] || 0}%`; // Using J-Pop/Anime as a placeholder for Jazz
                document.getElementById('genre-jazz-percent').textContent = `${listenerType.genres["j-pop/anime"] || 0}%`;
                
                // Update mood badges (only "Unknown" will be active)
                document.querySelectorAll('.mood-badge').forEach(badge => {
                    badge.classList.remove('active');
                });
                
                if (listenerType.moods && listenerType.moods.length > 0) {
                    const moodMap = {
                        "Unknown": "Chill" // Map "Unknown" to "Chill" for display
                    };
                    
                    document.querySelectorAll('.mood-badge').forEach(badge => {
                        if (listenerType.moods.some(mood => moodMap[mood] === badge.textContent)) {
                            badge.classList.add('active');
                        }
                    });
                }
                
                // Listening Style (these are hardcoded in listenerTypes)
                document.getElementById('style-immersive').style.width = '90%';
                document.getElementById('style-immersive-percent').textContent = '90%';
                document.getElementById('style-background').style.width = '40%';
                document.getElementById('style-background-percent').textContent = '40%';
                document.getElementById('style-social').style.width = '55%';
                document.getElementById('style-social-percent').textContent = '55%';

                // Create confetti celebration
                createConfetti();
            }
            
            // Analyze listener type based on winner
            function analyzeListenerType(winner) {
                // Find which category the winner belongs to
                let winnerGenre = winner.genre.toLowerCase(); // Use the assigned genre directly
                let winnerMood = winner.mood.toLowerCase(); // Use the assigned mood directly
                
                // Find best matching listener type
                let bestMatch = listenerTypes[0];
                let highestScore = -1; // Initialize with a low score

                for (const type of listenerTypes) {
                    let score = 0;
                    
                    // Score based on genre affinity
                    if (type.genres[winnerGenre]) {
                        score += type.genres[winnerGenre];
                    } else {
                        // Penalize if the genre is not explicitly listed in the listener type's preferences
                        score -= 10; 
                    }
                    
                    // Score based on mood (will mostly be "Unknown" for now)
                    if (type.moods.includes(winnerMood)) {
                        score += 50; // Boost for matching mood
                    }
                    
                    if (score > highestScore) {
                        highestScore = score;
                        bestMatch = type;
                    }
                }
                
                return bestMatch;
            }
            
            // Create confetti celebration
            function createConfetti() {
                const colors = ['#c084fc', '#e879f9', '#60a5fa', '#f472b6', '#a78bfa'];
                
                for (let i = 0; i < 100; i++) {
                    const confetti = document.createElement('div');
                    confetti.classList.add('confetti');
                    confetti.style.left = `${Math.random() * 100}%`;
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.width = `${Math.random() * 10 + 5}px`;
                    confetti.style.height = `${Math.random() * 10 + 5}px`;
                    confetti.style.animationDuration = `${Math.random() * 2 + 2}s`;
                    confetti.style.animationDelay = `${Math.random() * 2}s`;
                    
                    document.body.appendChild(confetti);
                    
                    // Remove confetti after animation
                    setTimeout(() => {
                        confetti.remove();
                    }, 5000);
                }
            }
            
            // Restart
            function restartBattle() {
                // Reset game state
                remainingSongs = [...songs];
                currentChampion = null;
                battleCount = 0;
                
                // Shuffle songs
                shuffleArray(remainingSongs);
                
                // Show home screen
                resultScreen.classList.add('hidden');
                homeScreen.classList.remove('hidden');
            }
            
            // Share result
            function shareResult() {
                const winner = document.querySelector('.winner-title').textContent;
                const artist = document.querySelector('.winner-artist').textContent;
                const listenerType = document.getElementById('listener-type').textContent;
                
                alert(`My ultimate favorite song is "${winner}" by ${artist} and I'm a ${listenerType}! Play the Music Verse Battle to discover yours!`);
            }
            
            // Shuffle array (Fisher-Yates algorithm)
            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }
            
            // Simulate music playing on hover/click
            function setupMusicPlayback() {
                // For desktop: hover effect
                document.addEventListener('mouseover', function(e) {
                    const musicCard = e.target.closest('.music-card');
                    if (musicCard && !isMobileDevice()) {
                        playMusic(musicCard);
                    }
                });
                
                // For mobile: click effect
                document.addEventListener('click', function(e) {
                    const musicCard = e.target.closest('.music-card');
                    if (musicCard && isMobileDevice()) {
                        playMusic(musicCard);
                    }
                });
            }
            
            // Check if user is on mobile device
            function isMobileDevice() {
                return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            }
            
            // Play music (visual effect only)
            function playMusic(musicCard) {
                const videoElement = musicCard.querySelector('video');
                if (!videoElement) return; // No video to play

                // Check if the video is already playing or is the currently designated playing video
                if (currentlyPlaying === videoElement && !videoElement.paused) {
                    return; 
                }

                // Pause all other videos
                document.querySelectorAll('video').forEach(video => {
                    if (video !== videoElement && !video.paused) {
                        video.pause();
                        video.closest('.music-card').classList.remove('playing');
                    }
                });
                
                // Play the selected video
                videoElement.play().catch(e => console.error("Error playing video:", e));
                musicCard.classList.add('playing');
                currentlyPlaying = videoElement;
                
                // Animate vinyl (if it's a visual effect tied to playing state)
                const vinyl = musicCard.querySelector('.vinyl');
                if (vinyl) {
                    vinyl.style.animationPlayState = 'running';
                }
            }
            
            // Event listeners
            startButton.addEventListener('click', function() {
                shuffleArray(remainingSongs);
                startBattle();
            });
            
            restartButton.addEventListener('click', restartBattle);
            shareButton.addEventListener('click', shareResult);
            
            // Add event listeners to choose buttons
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('choose-btn')) {
                    // Pause all videos when a choice is made
                    document.querySelectorAll('video').forEach(video => video.pause());
                    const index = parseInt(e.target.getAttribute('data-index'));
                    chooseWinner(index);
                }
            });
            
            // Initialize
            createStars();
            createFloatingNotes();
            setupMusicPlayback();
            shuffleArray(remainingSongs);
            
            // Update total battles display based on actual song count
            totalBattlesEl.textContent = totalBattles;
            songsRemainingEl.textContent = songs.length; // Initial songs remaining
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9628affba3b98f9a',t:'MTc1MzA3OTgyMy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
